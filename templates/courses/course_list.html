{% extends 'base.html' %}  {# Наследуем шаблон base.html, чтобы использовать его общую структуру (например, header, footer) #}

{% load static %}  {# Подключаем шаблонный тег static, чтобы можно было работать со статическими файлами (CSS, JS, изображения и т.д.) #}

{% block title %}Список курсов - BackendMaster{% endblock %}
{# Блок заголовка страницы в браузере (отображается на вкладке) #}

{% block content %}  {# Начинаем блок основного содержимого страницы #}
    <h1>Список курсов</h1>  {# Заголовок страницы, отображается крупным шрифтом #}

    <!-- Кнопка "Создать курс" для администраторов -->
    {% if user.is_staff %}  {# Проверяем, является ли пользователь администратором (переменная user передаётся Django автоматически) #}
        <div class="mb-3">  {# Блок с внешним отступом снизу (Bootstrap класс) #}
            <a href="{% url 'courses:course_create' %}" class="btn btn-success">Создать курс</a>
            {# Кнопка-ссылка на страницу создания нового курса. Зеленая кнопка (Bootstrap) #}
        </div>
    {% endif %}  {# Завершение проверки на администратора #}


{# Комментарий: #}
{# 1. Цикл {% for course in courses %} используется для отображения всех курсов. #}
{# 2. Для каждого курса выводится карточка с названием, описанием и кнопкой для перехода на страницу курса. #}
{# 3. Если пользователь - админ, добавляются кнопки "Редактировать" и "Удалить". #}
{# 4. Если курсов нет (через {% empty %}), выводится сообщение "Курсов пока нет". #}

    {% for course in courses %}  {# Начинаем цикл по всем курсам, переданным в контекст шаблона #}
        <div class="card mb-3">  {# Создаём карточку Bootstrap с отступом снизу для каждого курса #}
            <div class="card-body">  {# Тело карточки, куда помещаем содержимое #}
                <h2 class="card-title">{{ course.title }}</h2>  {# Название курса (выводится в виде заголовка второго уровня) #}
                <p class="card-text">{{ course.description }}</p>  {# Краткое описание курса #}
                <a href="{% url 'courses:course_detail' course.pk %}" class="btn btn-primary">Подробнее</a>
                {# Синяя кнопка, ведущая на страницу подробной информации о курсе #}

                <!-- Кнопки "Редактировать" и "Удалить" для администраторов -->
                {% if user.is_staff %}  {# Если пользователь — админ, показываем доп. кнопки #}
                    <a href="{% url 'courses:course_edit' course.pk %}" class="btn btn-warning ms-2">Редактировать</a>
                    {# Кнопка для редактирования курса (жёлтая) с отступом слева #}
                    <a href="{% url 'courses:course_delete' course.pk %}" class="btn btn-danger ms-2">Удалить</a>
                    {# Кнопка для удаления курса (красная) с отступом слева #}
                {% endif %}  {# Завершение проверки на администратора #}
            </div>
        </div>
    {% empty %}  {# Если список courses пуст, выполняется этот блок #}
        <p>Курсов пока нет.</p>  {# Сообщение, что курсы отсутствуют #}
    {% endfor %}  {# Завершение цикла по курсам #}
{% endblock %}  {# Завершение блока основного содержимого #}
